---
title: InnoDB相关
date: 2021-05-24 
---

### InnoDB相关文件  

+ 参数文件
+ 日志文件
   1. 错误日志
   2. 二进制日志
   3. 慢查询日志
   4. 查询日志
+ socket文件
+ pid文件
+ MySQL表结构文件
+ 存储引擎文件



### 参数文件  
MySQL实例启动的时候，数据库回先去读取一个配置参数文件，用来寻找数据库的各种文件所在的位置以及指定某些初始化参数，这些参数通常定义了某种内存结构有多大等。  

### 参数类型  
+ 动态(dynamic)参数
+ 静态(static)参数  



### 二进制日志  

二进制日志记录了对MySQL数据库执行更改得所有操作，但不包括SELECT和SHOW这类操作，因为这类操作对数据本身并没有修改。但是0 row affected可能也会写入二进制日志。   


如果用户想记录SELECT和SHOW操作，那只能使用查询日志，而不是二进制日志。  

二进制日志作用：  

+ 恢复(recovery): 某些数据的恢复需要二进制日志，例如在一个数据库全备文件恢复后，用户可以通过二进制日志进行point-in-time的恢复  
+ 复制(replication): 其原理与恢复类似，通过复制和执行二进制日志使一台远程的MySQL数据库(一般称为slave或standby)与一台MySQL数据库(一般称为master或primary)进行实时同步  
+ 审计(audit): 用户可以通过二进制日志中的信息来进行审计，判断是否有对数据库进行注入的攻击 


### InnoDB行记录格式  


#### 4.3.1 Compat行记录格式 

#### 4.3.2 Redundant行记录格式  


#### 行溢出数据
Mysql数据库的VARCHAR类型可以存放65535字节。如果真的创建会报错，能存放的varchar为65532(latin)，因为还有其他开销。  


此外65535是所有varchar列的长度总和  

#### 4.3.3 Compressed和Dynamic行记录格式  

这两种记录格式对于存放在BLOB中的数据采用了完全的行溢出的方式，在数据也中只存放20个字节的指针，实际数据都存放在Off Page中。   

Compressed行记录故事的另一个功能就是，存储在其中的行数据会以zlib的算法进行压缩，因此对于BLOB、TEXT、VARCHAR这类大长度类型的数据能够进行非常有效的存储。  

对于多字节字符编码的CHAR数据类型存储，InnoDB存储引擎在内部将其视为变长字符类型。   







